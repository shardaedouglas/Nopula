jQuery(document).ready(function(e){var s=e("#giapi-response"),i=e("#giapi-submit"),n=e("#giapi-url"),a=e(".giapi-action"),t=e("#giapi-response-userfriendly"),r=function(i,r,o){var l=new Date,d=l.toLocaleTimeString(),c=n.val().split("\n").filter(Boolean),p=c[0],g=!1,u=a.filter(":checked").val();c.length>1&&(p="(batch)",g=!0);var f=u;if("bing_submit"===u&&(f="indexnow_submit"),t.removeClass("not-ready fail success").addClass("ready").find(".response-id").html("<strong>"+f+"</strong> "+p),"bing_submit"!==o){if(g)t.addClass("success").find(".response-status").text(rm_giapi.l10n_success+" ").siblings(".response-message").text(rm_giapi.l10n_see_response),void 0!==i.error?t.addClass("fail").find(".response-status").text(rm_giapi.l10n_error+" "+i.error.code).siblings(".response-message").text(i.error.message):e.each(i,function(e,s){if(void 0!==s.error){var i="";void 0!==s.error.code&&(i=s.error.code);var n="";void 0!==s.error.message&&(n=s.error.message),t.addClass("fail").find(".response-status").text(rm_giapi.l10n_error+" "+i).siblings(".response-message").text(s.error.message)}});else if(void 0!==i.error)t.addClass("fail").find(".response-status").text(rm_giapi.l10n_error+" "+i.error.code).siblings(".response-message").text(i.error.message);else{var v=i;void 0!==i.urlNotificationMetadata&&(v=i.urlNotificationMetadata);var x=Date.now();void 0!==v.latestUpdate&&void 0!==v.latestUpdate.notifyTime&&(x=v.latestUpdate.notifyTime);var l=new Date(x);t.addClass("success").find(".response-status").text(rm_giapi.l10n_success+" ").siblings(".response-message").text(rm_giapi.l10n_last_updated+" "+l.toString())}}else void 0!==i.error?t.addClass("fail").find(".response-status").text(rm_giapi.l10n_error+" "+i.error.code).siblings(".response-message").text(i.error.message):t.addClass("success").find(".response-status").text(rm_giapi.l10n_success+" ").siblings(".response-message").text(rm_giapi.l10n_see_response),u="indexnow_submit";var m=d+" "+u+": "+p+"\n"+JSON.stringify(i,null,2)+"\n"+"-".repeat(56),b=s.val();s.val(m+"\n"+b)};e("#giapi-response-trigger").click(function(s){s.preventDefault(),e(this).find(".dashicons").toggleClass("dashicons-arrow-down-alt2 dashicons-arrow-up-alt2"),e("#giapi-response-wrapper").toggle()}),e("#instant-indexing").submit(function(s){s.preventDefault(),i.attr("disabled","disabled");var t=n.val(),o=a.filter(":checked").val(),l=e("#_wpnonce").val();e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"rm_giapi",url:t,api_action:o,_wpnonce:l}}).always(function(s){r(s,t,o),i.removeAttr("disabled"),e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"rm_giapi_limits",_wpnonce:l}}).done(function(s){e.each(s,function(s,i){e("#giapi-limit-"+s).text(i)})})})}),rm_giapi.submit_onload&&e("#instant-indexing").submit(),e("#indexnow_show_response_codes").on("click",function(s){s.preventDefault(),e(this).toggleClass("active"),e("#indexnow_response_codes").toggleClass("hidden")}),e("#indexnow_reset_key").on("click",function(s){s.preventDefault();let i=e("#giapi_indexnow_api_key").val();e("#giapi_indexnow_api_key").val("..."),e.ajax({url:rankMath.indexNow.restUrl+"/resetKey",type:"POST",beforeSend(e){e.setRequestHeader("X-WP-Nonce",rankMath.api.nonce)},success:function(s){e("#giapi_indexnow_api_key").val(s.key),e("#indexnow_api_key_location").text(s.location),e("#indexnow_check_key").attr("href",s.location)},error:function(s){e("#giapi_indexnow_api_key").val(i)}})})}),jQuery(window).on("load",function(){jQuery("#giapi-submit").prop("disabled",!1)});